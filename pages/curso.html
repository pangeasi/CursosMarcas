<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Proyecto de plataforma de cursos</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans" rel="stylesheet">

    <link rel="stylesheet" href="../styles/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body>
    <script src="../js/scroll.js"></script>
    <header id="header" class="nav-down">
        <div class="logo"></div>
        <nav class="normal">
           <div id="subm" class="categories">Categorias

           </div>
           <div class="search">
               <input type="search" name="search" id="search" placeholder="Buscar cursos..." onfocusout="ocultarCursos()" onfocus="mostrarCursos()" >
               <div id="searchCursos"></div>
           </div>
        </nav>
        <nav class="log">
            <div class="login">ENTRAR</div>
            <div class="registrate">REGISTRATE</div>
        </nav>
    </header>
    <div class="margin"></div>
    <div class="categName"></div>
    <main id="cursos"></main>

    <footer id="foot">  
     
    </footer>
</body>

<script src="../js/loadXML.js"></script>
    <script>	
        loadXML("../data/db.xml", "../data/curso.xsl" , "cursos");
        loadXML("../data/db.xml", "../data/templateSearch.xsl" , "searchCursos");
        loadXML("../data/dbPage.xml","../data/categoriesTemplate.xsl", "subm");
        loadXML("../data/footerdb.xml","../data/footerTemplate.xsl", "foot")

        setTimeout(function(){
            let categorie;
            let curso;

            $('.submenu li').click(function(){
                localStorage.setItem("categorieName",$(this).text())
            })
            categorie = localStorage.getItem("categorieName"); 
            
            $('.title').click(function(){
                
                localStorage.setItem("cursoName",$(this).text())
            })
            
            curso = localStorage.getItem("cursoName")
            

           let cssStyle = "" 
           
           $('.submenu li').each(function(i){
                
               cssStyle += ".smli" + i + "::before { background-image: url(" + $(this).attr('value') + ");}"

            })
            var style = document.createElement('style');
            style.type = 'text/css';
            style.innerHTML = cssStyle;
            document.getElementsByTagName('head')[0].appendChild(style);

            $('.submenu li').each(function(i){
                $(this).addClass("smli" + i)
            })
            
           $(".cursoli").each(function(){

                if($(this).find('h1').text() != curso){
                    $(this).addClass('hideli')
                }
            }) 

            $('.logo').click(function(){
                location.href = '../index.html';
            })
            $('.title').click(function(){
                location.href = 'curso.html';
            })
            $('.submenu li').click(function(){
                location.href = 'categories.html';
            })
 

        },100)
        
            
    </script>
</html>